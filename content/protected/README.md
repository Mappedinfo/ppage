# 加密内容示例

这个文件夹包含了加密功能的示例文件，用于演示如何保护私密内容。

## 📁 示例文件

1. **test-encrypted.md** - 基础加密示例
   - 测试各种 Markdown 格式
   - 验证加密/解密功能

2. **private-diary.md** - 个人日记示例
   - 演示日记类内容保护
   - 包含私密想法和记录

3. **technical-notes.md** - 技术笔记示例
   - 内部技术文档
   - 敏感技术信息保护

4. **meeting-minutes.md** - 会议纪要示例
   - 内部会议记录
   - 团队协作信息保护

## 🔐 使用步骤

### 1. 查看未加密内容

当前这些文件还是明文，你可以直接查看内容。

### 2. 运行加密脚本

```bash
npm run encrypt
```

按照提示输入密码（建议使用：`demo2025`）

### 3. 查看加密结果

加密后，文件内容会变成：

```markdown
---
title: '测试加密内容'
encrypted: true
encryptedAt: '2025-01-08T12:00:00.000Z'
---

<!-- ENCRYPTED_CONTENT -->

[Base64编码的加密内容...]

<!-- /ENCRYPTED_CONTENT -->
```

### 4. 启动开发服务器

```bash
npm run dev
```

### 5. 访问加密内容

1. 打开浏览器访问 http://localhost:5173
2. 导航到"文档"页面
3. 点击加密的文档
4. 输入密码（`demo2025`）
5. 查看解密后的内容

## 💡 测试场景

### 场景1：首次访问

- 访问加密文档
- 应该弹出密码输入框
- 输入正确密码后显示内容

### 场景2：会话缓存

- 解锁一个文档后
- 访问其他加密文档
- 不需要再次输入密码（使用缓存）

### 场景3：密码错误

- 输入错误密码
- 应该显示错误提示
- 可以重新输入

### 场景4：刷新页面

- 刷新浏览器
- 密码缓存被清除
- 需要重新输入密码

### 场景5：多个文档

- 加密多个文档
- 使用相同密码
- 一次解锁全部可访问

## 🎯 演示要点

### 安全性演示

1. **查看加密文件**

   ```bash
   cat content/protected/test-encrypted.md
   ```

   只能看到加密后的乱码，无法直接读取内容

2. **Git 提交安全**

   ```bash
   git add content/protected/
   git commit -m "Add encrypted content"
   ```

   加密内容可以安全提交到公开仓库

3. **源代码公开**
   即使仓库公开，没有密码也无法查看内容

### 用户体验演示

1. **美观的界面**
   - 密码输入对话框设计精美
   - 支持显示/隐藏密码
   - 响应式设计，移动端友好

2. **友好的提示**
   - 清晰的错误信息
   - 加载状态提示
   - 成功解锁提示

3. **便捷的缓存**
   - 会话期间记住密码
   - 无需重复输入
   - 刷新页面自动清除

## 📝 开发提示

### 重新加密

如果需要修改密码或重新加密：

```bash
# 1. 恢复原始文件（如果有备份）
# 2. 修改内容
# 3. 重新运行加密脚本
npm run encrypt
```

### 添加新的受保护内容

```bash
# 创建新文件
echo "---
title: 新的私密文档
---

# 私密内容
" > content/protected/new-secret.md

# 加密
npm run encrypt
```

### 使用不同密码

如果需要为不同文件使用不同密码：

1. 修改 `public/config.yml`，添加新的受保护文件夹
2. 为每个文件夹分别运行加密脚本
3. 用户访问时需要输入对应的密码

## 🔧 故障排查

### 问题1：密码输入后没有反应

**可能原因**：

- 浏览器不支持 Web Crypto API
- 加密数据格式错误

**解决方案**：

- 使用现代浏览器（Chrome 60+, Firefox 57+）
- 检查控制台错误信息

### 问题2：显示"解密失败"

**可能原因**：

- 密码错误
- 文件损坏

**解决方案**：

- 确认密码正确
- 重新加密文件

### 问题3：刷新后需要重新输入密码

这是正常行为，密码只在会话期间缓存，不会持久化存储。

## 📚 相关文档

- [ENCRYPTION.md](../../ENCRYPTION.md) - 完整的加密功能文档
- [readme.md](../../readme.md) - 项目主文档

## 🎉 开始体验

现在就可以运行 `npm run encrypt` 来加密这些示例文件，然后启动开发服务器体验完整的加密功能！

**推荐密码**：`demo2025`（方便演示和测试）

**生产环境密码建议**：

- 至少 12 位字符
- 包含大小写字母、数字和特殊字符
- 不使用常见密码
- 定期更换
